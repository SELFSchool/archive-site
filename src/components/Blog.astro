---
import Pill from "./Pill.astro";

interface MarkdownFrontmatter {
  publishDate: number;
}

let allPosts = Astro.fetchContent<MarkdownFrontmatter>('../pages/posts/*.md');
allPosts = allPosts.sort((a, b) => new Date(b.publishDate).valueOf() - new Date(a.publishDate).valueOf());
---

<section class="bg-secondary">
    <div class="w-full px-16 py-6 mx-auto space-y-5 sm:py-8 md:py-12 sm:space-y-8 md:space-y-16 max-w-7xl">
        <div class="flex flex-col items-center sm:px-5 md:flex-row">
            <div class="w-full md:w-1/2">
                <img class="object-cover w-full h-full rounded-lg max-h-64 sm:max-h-96" src="blog.png">
            </div>
            <div class="flex flex-col items-start justify-center w-full h-full py-6 mb-6 md:mb-0 md:w-1/2">
                <div class="flex flex-col items-start justify-center h-full space-y-3 transform md:pl-10 lg:pl-16 md:space-y-5">
                    <h1 class="text-4xl font-bold leading-none lg:text-5xl xl:text-6xl"><a href="#_">Posts to Learn About Learning</a></h1>
                </div>
            </div>
        </div>
        <div class="flex grid grid-cols-12 pb-10 sm:px-5 gap-x-8 gap-y-16">
            {allPosts.map(p => {
                return(
                <div class="flex flex-col items-start col-span-12 space-y-3 sm:col-span-6 xl:col-span-4 transition duration-300 transform hover:scale-105">
                    <a href="{p.url}" class="block w-full">
                        <img class="object-cover w-full mb-2 overflow-hidden rounded-lg shadow-sm max-h-56" src="{p.heroImage}">
                    </a>
                    <div class="flex flex-row gap-2">
                        {p.tags.map((item)=>(
                            <Pill>{item}</Pill>
                        ))}
                    </div>
                    <h2 class="text-lg font-bold sm:text-xl md:text-2xl"><a href="{p.url}">{p.title}</a></h2>
                    <p class="text-sm text-gray-500">{p.description}</p>
                    <p class="pt-2 text-xs font-medium"><a href="#_" class="mr-1 underline">{p.author}</a> Â· <span class="mx-1">{p.publishDate}</span></p>
                </div>
                )
            })}
        </div>
    </div>
</section>

